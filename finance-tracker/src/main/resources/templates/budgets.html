<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budgets - BudgetAI</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<div class="layout">
    <div th:replace="~{fragments/sidebar :: appSidebar}"></div>
    <main class="content">
        <div th:replace="~{fragments/header :: appHeader}"></div>
        
        <div class="page-content">
            <div class="page-header">
                <h1>Budgets</h1>
                <p>Manage your monthly budgets and spending limits</p>
            </div>
            
            <div class="budgets-container">
                <!-- Current Budget Card -->
                <div class="budget-card">
                    <div class="budget-header">
                        <h3>Current Month Budget</h3>
                        <span class="month-label" th:text="${currentMonth.getMonth().name() + ' ' + currentMonth.getYear()}">October 2025</span>
                    </div>
                    
                    <div class="budget-content" th:if="${currentBudget != null}">
                        <div class="budget-amount">
                            <span class="currency">â‚¹</span>
                            <span class="amount" th:text="${#numbers.formatDecimal(currentBudget.amount, 0, 2, 'POINT')}">0.00</span>
                        </div>
                        <p class="budget-description">Monthly spending limit</p>
                    </div>
                    
                    <div class="budget-content" th:if="${currentBudget == null}">
                        <div class="no-budget">
                            <p>No budget set for this month</p>
                        </div>
                    </div>
                </div>
                
                <!-- Set/Update Budget Form -->
                <div class="budget-form-card">
                    <h3>Set Monthly Budget</h3>
                    <form th:action="@{/budgets}" method="post" class="budget-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="monthYear">Month & Year</label>
                                <input type="month" id="monthYear" name="monthYear" 
                                       th:value="${#temporals.format(currentMonth, 'yyyy-MM')}" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="amount">Budget Amount</label>
                                <div class="amount-input">
                                    <span class="currency-symbol">â‚¹</span>
                                    <input type="number" id="amount" name="amount" 
                                           th:value="${currentBudget != null ? currentBudget.amount : ''}"
                                           step="0.01" min="0" placeholder="3000.00" required>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <span th:if="${currentBudget != null}">Update Budget</span>
                            <span th:if="${currentBudget == null}">Set Budget</span>
                        </button>
                    </form>
                </div>
                
                <!-- Budget Tips -->
                <div class="tips-card">
                    <h4>ðŸ’¡ Budget Tips</h4>
                    <ul>
                        <li>Set realistic budgets based on your income</li>
                        <li>Review and adjust your budget monthly</li>
                        <li>Track your spending to stay within limits</li>
                        <li>Consider setting aside 20% for savings</li>
                    </ul>
                </div>
            </div>
        </div>
    </main>
</div>

<style>
.page-content {
    padding: 24px;
    max-width: 1200px;
    margin: 0 auto;
}

.page-header {
    margin-bottom: 32px;
}

.page-header h1 {
    font-size: 28px;
    font-weight: 700;
    color: #1e293b;
    margin: 0 0 8px 0;
}

.page-header p {
    color: #64748b;
    margin: 0;
}

.budgets-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    margin-bottom: 32px;
}

.budget-card, .budget-form-card, .tips-card {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}

.budget-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.budget-header h3 {
    margin: 0;
    color: #1e293b;
}

.month-label {
    background: #e6efff;
    color: #1e3a8a;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
}

.budget-amount {
    display: flex;
    align-items: baseline;
    margin-bottom: 8px;
}

.currency {
    font-size: 24px;
    color: #64748b;
    margin-right: 4px;
}

.amount {
    font-size: 36px;
    font-weight: 700;
    color: #1e293b;
}

.budget-description {
    color: #64748b;
    margin: 0;
}

.no-budget {
    text-align: center;
    padding: 20px;
    color: #64748b;
}

.budget-form-card h3 {
    margin: 0 0 20px 0;
    color: #1e293b;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 20px;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    font-weight: 500;
    color: #374151;
    margin-bottom: 6px;
}

.form-group input {
    padding: 10px 12px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 14px;
}

.form-group input:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.amount-input {
    position: relative;
    display: flex;
    align-items: center;
}

.currency-symbol {
    position: absolute;
    left: 12px;
    color: #64748b;
    font-weight: 500;
}

.amount-input input {
    padding-left: 24px;
}

.tips-card {
    grid-column: 1 / -1;
}

.tips-card h4 {
    margin: 0 0 16px 0;
    color: #1e293b;
}

.tips-card ul {
    margin: 0;
    padding-left: 20px;
    color: #64748b;
}

.tips-card li {
    margin-bottom: 8px;
}

@media (max-width: 768px) {
    .budgets-container {
        grid-template-columns: 1fr;
    }
    
    .form-row {
        grid-template-columns: 1fr;
    }
}
</style>
</body>
</html>








